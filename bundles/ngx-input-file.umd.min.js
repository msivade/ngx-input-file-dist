!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@angular/common"),require("@angular/material/button"),require("@angular/material/form-field"),require("@angular/material/icon"),require("@angular/material/input")):"function"==typeof define&&define.amd?define("ngx-input-file",["exports","@angular/core","@angular/forms","@angular/common","@angular/material/button","@angular/material/form-field","@angular/material/icon","@angular/material/input"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["ngx-input-file"]={},e.ng.core,e.ng.forms,e.ng.common,e.ng.material.button,e.ng.material.formField,e.ng.material.icon,e.ng.material.input)}(this,(function(e,t,i,n,r,o,a,l){"use strict";var c,s="bounce-in",u="*",p=1,f="add",d="delete",m="insert_drive_file",h="link",g=!1,b="Link",v=null;!function(e){e[e.badFile=0]="badFile",e[e.limitReached=1]="limitReached",e[e.sizeReached=2]="sizeReached"}(c||(c={}));Object.create;function y(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}Object.create;var k=function(){function e(e){this._config=e}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),e.prototype.limitGuard=function(e,t){return e.length<t},e.prototype.sizeGuard=function(e,t){return!t||e.size<1024*t*1024},e.prototype.typeGuard=function(e,t){var i,n,r=null==t;if(t){var o=t.replace("*","").split(",");try{for(var a=y(o),l=a.next();!l.done;l=a.next()){var c=l.value;if(e.type.startsWith(c)||"."===c.charAt(0)&&null!=e.name&&e.name.endsWith(c)){r=!0;break}}}catch(e){i={error:e}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}}return r},e}();function F(e){if(null!=i.Validators.required(e))return null;var t=e.value;return/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(t)?null:{url:!0}}k.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new k(t.ɵɵinject("config"))},token:k,providedIn:"root"}),k.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],k.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:["config"]}]}]};var w=function(){function e(i,n){this.formBuilder=i,this.inputFileService=n,this.acceptedFile=new t.EventEmitter,this.deletedFile=new t.EventEmitter,this.rejectedFile=new t.EventEmitter,this.files=new Array,this.id="ngx-input-file-"+e.nextId++,this.onChange=function(e){},this.onTouched=function(){}}return Object.defineProperty(e.prototype,"classAnimation",{get:function(){return this._classAnimation||this.inputFileService.config.classAnimation||s},set:function(e){this._classAnimation=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fileAccept",{get:function(){return this._fileAccept||this.inputFileService.config.fileAccept||u},set:function(e){this._fileAccept=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fileLimit",{get:function(){return this._fileLimit||this.inputFileService.config.fileLimit||p},set:function(e){this._fileLimit=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iconAdd",{get:function(){return this._iconAdd||this.inputFileService.config.iconAdd||f},set:function(e){this._iconAdd=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iconDelete",{get:function(){return this._iconDelete||this.inputFileService.config.iconDelete||d},set:function(e){this._iconDelete=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iconFile",{get:function(){return this._iconFile||this.inputFileService.config.iconFile||m},set:function(e){this._iconFile=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iconLink",{get:function(){return this._iconLink||this.inputFileService.config.iconLink||h},set:function(e){this._iconLink=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linkEnabled",{get:function(){return this._linkEnabled||this.inputFileService.config.linkEnabled||g},set:function(e){this._linkEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"placeholderLink",{get:function(){return this._placeholderLink||this.inputFileService.config.placeholderLink||b},set:function(e){this._placeholderLink=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeLimit",{get:function(){return this._sizeLimit||this.inputFileService.config.sizeLimit||v},set:function(e){this._sizeLimit=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canAddFile",{get:function(){return this.files&&this.files.length<this.fileLimit},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.setForm()},e.prototype.onDeleteFile=function(e){if(!this.disabled){var t=this.files.slice();this.deletedFile.emit(t[e]),t.splice(e,1),this.writeValue(t)}},e.prototype.onDragOver=function(e){e.ripple.launch({centered:!0,persistent:!0})},e.prototype.onDragLeave=function(e){e.ripple.fadeOutAll()},e.prototype.onLink=function(){this.addLink=!this.addLink},e.prototype.onReplaceFile=function(e,t,i,n){if(!this.disabled){var r=this.files.slice(),o={file:e.item(0)};i.ripple.fadeOutAll(),this.fileGuard(r,o,!0)&&(r[t]=o,this.acceptedFile.emit(o)),this.writeValue(r),n&&(n.value="")}},e.prototype.onSelectFile=function(e,t){var i=this;if(!this.disabled){t.ripple.fadeOutAll();var n=this.files.slice();Array.from(e).forEach((function(e){var t={file:e};i.fileGuard(n,t)&&(n.push(t),i.acceptedFile.emit(t))})),this.writeValue(n),this.fileInput.nativeElement.value=""}},e.prototype.onSubmitLink=function(){if(!this.disabled&&this.form.valid){var e=this.files.slice(),t={link:this.form.value.link,preview:this.form.value.link};e.push(t),this.acceptedFile.emit(t),this.onLink(),this.form.reset(),this.writeValue(e)}},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this.disabled=e},e.prototype.writeValue=function(e){e||(e=new Array),this.files=e,this.setFilePreview(),this.onChange(this.files)},e.prototype.fileGuard=function(e,t,i){return i||this.inputFileService.limitGuard(e,this.fileLimit)?this.inputFileService.sizeGuard(t.file,this.sizeLimit)?!!this.inputFileService.typeGuard(t.file,this.fileAccept)||(this.rejectedFile.emit({reason:c.badFile,file:t}),!1):(this.rejectedFile.emit({reason:c.sizeReached,file:t}),!1):(this.rejectedFile.emit({reason:c.limitReached,file:t}),!1)},e.prototype.setFilePreview=function(){var e=this,t=function(t){if(null!=i.files[t].file&&i.inputFileService.typeGuard(i.files[t].file,"image/*")){var n=new FileReader;n.onload=function(){e.files[t].preview=n.result},n.readAsDataURL(i.files[t].file)}},i=this;for(var n in this.files)t(n)},e.prototype.setForm=function(){this.form=this.formBuilder.group({link:["",[i.Validators.required,F]]})},e}();w.nextId=0,w.decorators=[{type:t.Component,args:[{selector:"input-file",template:'<div class="input-file-container">\n    <label class="mat-orphan-label" [for]="id" [class.active]="files?.length" [innerHtml]="placeholder" *ngIf="placeholder"></label>\n    <div class="files-container">\n\n        <ng-container *ngFor="let file of files; let i = index">\n            <div class="file-container" [ngClass]="classAnimation">\n                <ng-container *ngTemplateOutlet="fileTemplate; context: { $implicit: file, index: i }"></ng-container>\n            </div>\n        </ng-container>\n\n        <ng-container *ngIf="canAddFile">\n            <div class="file-container">\n                <ng-container *ngIf="!addLink; else linkTemplate">\n                    <ng-container *ngTemplateOutlet="addTemplate"></ng-container>\n                </ng-container>\n            </div>\n        </ng-container>\n    </div>\n\n</div>\n\n<ng-template #addTemplate>\n    <button mat-button inputFileDropZone class="file-button" type="button" (click)="fileInput.click()" (itemDrop)="onSelectFile($event, selectButton)"\n        (itemDragOver)="onDragOver(selectButton)" (itemDragLeave)="onDragLeave(selectButton)" [disabled]="disabled" #selectButton>\n        <mat-icon class="input-icon">{{ iconAdd }}</mat-icon>\n    </button>\n    <button mat-button class="secondary-button" type="button" [disabled]="disabled" (click)="onLink()" *ngIf="linkEnabled">\n        <mat-icon>{{ iconLink }}</mat-icon>\n    </button>\n    <input [id]="id" [accept]="fileAccept" hidden type="file" [attr.multiple]="fileLimit > 1 ? true : null" #fileInput (change)="onSelectFile($event.target.files, selectButton)">\n</ng-template>\n\n<ng-template #fileTemplate let-file let-index="index">\n    <img class="image-preview" [src]="file.preview" *ngIf="file.preview">\n    <button mat-button inputFileDropZone class="replace-button" type="button" (click)="fileReplace.click()" (itemDrop)="onReplaceFile($event, index, replaceButton)"\n        [disabled]="disabled" (itemDragOver)="onDragOver(replaceButton)" (itemDragLeave)="onDragLeave(replaceButton)" #replaceButton>\n        <ng-container *ngIf="!file.preview">\n            <mat-icon class="input-icon">{{ iconFile }}</mat-icon>\n            <div class="file-name text-truncate" [innerHtml]="file.file.name" *ngIf="file.file"></div>\n        </ng-container>\n    </button>\n    <button mat-button class="secondary-button" type="button" (click)="onDeleteFile(index)" [disabled]="disabled">\n        <mat-icon>{{ iconDelete }}</mat-icon>\n    </button>\n    <input [accept]="fileAccept" hidden type="file" #fileReplace (change)="onReplaceFile($event.target.files, index, replaceButton, fileReplace)">\n</ng-template>\n\n<ng-template #linkTemplate>\n    <form class="form-link slide-in-up" [formGroup]="form" (ngSubmit)="onSubmitLink()" novalidate>\n        <mat-form-field class="input-link">\n            <input matInput formControlName="link" [placeholder]="placeholderLink">\n        </mat-form-field>\n        <div class="form-link-button">\n            <button mat-button type="button" (click)="onLink()" [disabled]="disabled">\n                <mat-icon>arrow_back</mat-icon>\n            </button>\n            <button mat-button type="submit" [disabled]="disabled">\n                <mat-icon>check</mat-icon>\n            </button>\n        </div>\n    </form>\n</ng-template>',providers:[{provide:i.NG_VALUE_ACCESSOR,useExisting:t.forwardRef((function(){return w})),multi:!0}],styles:[".input-file-container{position:relative}.input-file-container .files-container{display:flex;flex-direction:row;flex-wrap:wrap;padding-top:1.25rem}.input-file-container .file-button,.input-file-container .file-container{align-items:center;display:flex;height:10rem;justify-content:center;width:10rem}.input-file-container .secondary-button{width:10rem}.input-file-container .file-button{flex:1}.input-file-container .file-container{flex-direction:column;margin-right:1rem;overflow:hidden}.input-file-container .replace-button{flex:1;width:10rem}.input-file-container .mat-button:focus{outline:0}.input-file-container .file-name{width:7.5rem}.input-file-container .image-preview{-o-object-fit:contain;height:10rem;object-fit:contain;position:absolute;width:10rem}.input-file-container .input-icon{font-size:2.5rem;height:2.5rem;width:2.5rem}.input-file-container .form-link{display:flex;flex-direction:column;width:10rem}.input-file-container .input-link{width:10rem}.input-file-container .form-link-button{display:flex;flex-direction:row}.input-file-container .form-link-button .mat-button{min-width:5rem;width:5rem}.input-file-container .mat-orphan-label{color:rgba(0,0,0,.54);display:block;font-size:1rem;left:0;margin:0;position:absolute;top:0;transform-origin:0;transition:.4s cubic-bezier(.25,.8,.25,1),width .4s cubic-bezier(.25,.8,.25,1)}.input-file-container .mat-orphan-label.active{transform:scale(.75)}@-webkit-keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:scale3d(.3,.3,.3)}20%{transform:scale3d(1.1,1.1,1.1)}40%{transform:scale3d(.9,.9,.9)}60%{opacity:1;transform:scale3d(1.03,1.03,1.03)}80%{transform:scale3d(.97,.97,.97)}to{opacity:1;transform:scaleX(1)}}@keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:scale3d(.3,.3,.3)}20%{transform:scale3d(1.1,1.1,1.1)}40%{transform:scale3d(.9,.9,.9)}60%{opacity:1;transform:scale3d(1.03,1.03,1.03)}80%{transform:scale3d(.97,.97,.97)}to{opacity:1;transform:scaleX(1)}}.bounce-in{-webkit-animation-duration:.75s;-webkit-animation-name:bounceIn;animation-duration:.75s;animation-name:bounceIn}@-webkit-keyframes slideInUp{0%{opacity:0;transform:translate3d(0,100%,0)}to{opacity:1;transform:translateZ(0)}}@keyframes slideInUp{0%{opacity:0;transform:translate3d(0,100%,0)}to{opacity:1;transform:translateZ(0)}}.slide-in-up{-webkit-animation-duration:.25s;-webkit-animation-name:slideInUp;animation-duration:.25s;animation-name:slideInUp}"]}]}],w.ctorParameters=function(){return[{type:i.FormBuilder},{type:k}]},w.propDecorators={disabled:[{type:t.Input}],placeholder:[{type:t.Input}],classAnimation:[{type:t.Input}],fileAccept:[{type:t.Input}],fileLimit:[{type:t.Input}],iconAdd:[{type:t.Input}],iconDelete:[{type:t.Input}],iconFile:[{type:t.Input}],iconLink:[{type:t.Input}],linkEnabled:[{type:t.Input}],placeholderLink:[{type:t.Input}],sizeLimit:[{type:t.Input}],acceptedFile:[{type:t.Output}],deletedFile:[{type:t.Output}],rejectedFile:[{type:t.Output}],fileInput:[{type:t.ViewChild,args:["fileInput",{static:!1}]}]};var L=function(){function e(){this.disabled=!1,this.itemDragOver=new t.EventEmitter,this.itemDragLeave=new t.EventEmitter,this.itemDrop=new t.EventEmitter,this.whiteListClasses=["file-button","mat-button-wrapper","input-icon"]}return e.prototype.onDragOver=function(e){this.preventAndStopEventPropagation(e),this.isOver||this.disabled||(this.isOver=!0,this.itemDragOver.emit())},e.prototype.onDragLeave=function(e){this.preventAndStopEventPropagation(e),this.isOver&&this.isTrueLeave(e)&&!this.disabled&&(this.isOver=!1,this.itemDragLeave.emit())},e.prototype.onDrop=function(e){if(!this.disabled){this.preventAndStopEventPropagation(e),this.isOver=!1;try{this.itemDrop.emit(e.dataTransfer.files)}catch(e){console.error(e)}}},e.prototype.preventAndStopEventPropagation=function(e){e.preventDefault(),e.stopPropagation()},e.prototype.isTrueLeave=function(e){var t,i;try{for(var n=y(this.whiteListClasses),r=n.next();!r.done;r=n.next()){var o=r.value;if(null!=e.fromElement&&e.fromElement.className.indexOf(o)>=0)return!1}}catch(e){t={error:e}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return!0},e}();L.decorators=[{type:t.Directive,args:[{selector:"[inputFileDropZone]"}]}],L.propDecorators={disabled:[{type:t.Input}],itemDragOver:[{type:t.Output}],itemDragLeave:[{type:t.Output}],itemDrop:[{type:t.Output}],onDragOver:[{type:t.HostListener,args:["dragover",["$event"]]}],onDragLeave:[{type:t.HostListener,args:["dragleave",["$event"]]}],onDrop:[{type:t.HostListener,args:["drop",["$event"]]}]};var I=function(){function e(){}return e.forRoot=function(t){return{ngModule:e,providers:[k,{provide:"config",useValue:t}]}},e}();I.decorators=[{type:t.NgModule,args:[{declarations:[L,w],imports:[n.CommonModule,i.FormsModule,r.MatButtonModule,o.MatFormFieldModule,a.MatIconModule,l.MatInputModule,i.ReactiveFormsModule],exports:[w],providers:[k],entryComponents:[w]}]}],e.InputFileComponent=w,e.InputFileModule=I,e.InputFileService=k,e.ɵa=L,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-input-file.umd.min.js.map